<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Vector</title>
    <script
      type="text/javascript"
      src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"
    ></script>
    <style type="text/css">
      #mynetwork {
        width: 100;
        height: 90vh;
        border: 1px solid lightgray;
      }
    </style>
  </head>
  <body>
    <div id="mynetwork"></div>
    {{ page }}
    <script type="text/javascript">
      // create an array with nodes
     
      var nodes = new vis.DataSet([

{% for vector in vectors %}{ id: {{ vector.id }}, label: "{{ vector.array }}".replace(/\[|\]/g, '') }, 
{% endfor %}

{% for operation in operations %}{ id: {{ operation.id }}, label: "{{ operation.type }}", shape: "box", color: "#7BE141" }, 
{% endfor %}
]);

// create an array with edges
var edges = new vis.DataSet([
{% for operation in operations %}{ from: {{ operation.id}}, to: {{ operation.new_vector.id}}, arrows: "to" }, 
{% endfor %}
{% for operation in operations %} {% for item in operation.vectors.all %}{ from: {{ item.id}}, to: {{ operation.id}}, arrows: "to" }, {% endfor %}
{% endfor %}
]);


// create a network
var container = document.getElementById("mynetwork");
var data = {
  nodes: nodes,
  edges: edges,
};

var options = {

      
  };

var network = new vis.Network(container, data, options);
network.on("doubleClick", function(properties) {
  if(!properties.nodes.length) return;
 console.log(properties)
  window.location.replace(`/admin/node/vector/${properties.nodes}/change/`);
  $.ajax({
 statusCode: {
  404: function() {
    alert( "page not found" );
  }
 }
});
});
network.on("click", function (params) {
  console.log(params);
});
    </script>
<button type="button" style="background-color:rgb(143, 164, 230);">
  <a href="/admin/node/vector/add/">Create vector</a>
</button>
<button type="button" style="background-color:rgb(143, 164, 230);">
  <a href="/admin/node/operation/add/">Create operation</a>
</button>
  </body>
</html>